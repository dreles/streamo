{"ast":null,"code":"import _regeneratorRuntime from \"/Users/andreleslie/Desktop/streamo/client/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/andreleslie/Desktop/streamo/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/andreleslie/Desktop/streamo/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/andreleslie/Desktop/streamo/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/andreleslie/Desktop/streamo/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/andreleslie/Desktop/streamo/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/andreleslie/Desktop/streamo/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/andreleslie/Desktop/streamo/client/src/components/Comments.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport streams from '../apis/streams';\nimport ScrollArea from 'react-scrollbar';\n\nvar Comments =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Comments, _React$Component);\n\n  function Comments() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Comments);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Comments)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      comments: [],\n      text: \"\"\n    };\n\n    _this.renderComments = function () {\n      return _this.state.comments.map(function (comment) {\n        if (comment.streamId === _this.props.stream.id) {\n          return React.createElement(\"div\", {\n            key: comment.id,\n            className: \"item\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 21\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"content\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 22\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            style: {\n              paddingBottom: \"6px\"\n            },\n            className: \"header\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 23\n            },\n            __self: this\n          }, comment.user), comment.content), _this.renderDelete(comment.user, comment.id));\n        } else {\n          return null;\n        }\n      });\n    };\n\n    _this.onSubmit =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(e) {\n        var data;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault();\n                data = {\n                  user: _this.props.user,\n                  content: _this.state.text,\n                  streamId: _this.props.stream.id\n                };\n                _context.next = 4;\n                return streams.post('/comments', data);\n\n              case 4:\n                _this.getComments();\n\n                _this.setState({\n                  text: \"\"\n                });\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    return _this;\n  }\n\n  _createClass(Comments, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                this.getComments();\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"renderDelete\",\n    value: function renderDelete(user, commentId) {\n      var _this2 = this;\n\n      if (this.props.user === user) {\n        return React.createElement(\"div\", {\n          onClick: function onClick(e) {\n            return _this2.deleteComment(commentId);\n          },\n          style: {\n            float: \"right\",\n            cursor: \"pointer\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 42\n          },\n          __self: this\n        }, \"delete\");\n      } else {\n        return null;\n      }\n    }\n  }, {\n    key: \"deleteComment\",\n    value: function () {\n      var _deleteComment = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(commentId) {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return streams.delete('/comments/' + commentId);\n\n              case 2:\n                this.getComments();\n\n              case 3:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function deleteComment(_x2) {\n        return _deleteComment.apply(this, arguments);\n      }\n\n      return deleteComment;\n    }()\n  }, {\n    key: \"getComments\",\n    value: function () {\n      var _getComments = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4() {\n        var comments;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return streams.get('/comments/');\n\n              case 2:\n                comments = _context4.sent;\n                this.setState({\n                  comments: comments.data\n                });\n\n              case 4:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function getComments() {\n        return _getComments.apply(this, arguments);\n      }\n\n      return getComments;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(ScrollArea, {\n        style: {\n          width: \"100%\",\n          height: \"350px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"ui segment\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          color: \"black\"\n        },\n        className: \"ui relaxed divided list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, \"Chat\"), this.renderComments()), React.createElement(\"div\", {\n        className: \"ui divider\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"ui search\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }))), React.createElement(\"form\", {\n        className: \"ui form\",\n        onSubmit: this.onSubmit,\n        style: {\n          borderRadius: \"25px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        value: this.state.text,\n        onChange: function onChange(e) {\n          _this3.setState({\n            text: e.target.value\n          });\n        },\n        style: {\n          width: \"100%\"\n        },\n        className: \"prompt\",\n        type: \"text\",\n        placeholder: \"Add Comment...\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Comments;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    user: state.signedIn.userId\n  };\n};\n\nexport default connect(mapStateToProps)(Comments);","map":{"version":3,"sources":["/Users/andreleslie/Desktop/streamo/client/src/components/Comments.js"],"names":["React","connect","streams","ScrollArea","Comments","state","comments","text","renderComments","map","comment","streamId","props","stream","id","paddingBottom","user","content","renderDelete","onSubmit","e","preventDefault","data","post","getComments","setState","commentId","deleteComment","float","cursor","delete","get","width","height","color","borderRadius","target","value","Component","mapStateToProps","signedIn","userId"],"mappings":"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","sourcesContent":["import React from 'react'\nimport {connect} from 'react-redux'\nimport streams from '../apis/streams'\nimport ScrollArea from 'react-scrollbar'\n\n\nclass Comments extends React.Component {\n\tstate = {comments: [], text: \"\"} \n\n\tasync componentDidMount(){ \n\t\tthis.getComments()\n\t}\n\n\trenderComments = () => {\n\t\t\n\t\treturn(\n\n\t\t\tthis.state.comments.map((comment) => { \n\t\t\t\tif(comment.streamId === this.props.stream.id){\n\t\t\t\t\treturn(\n\t\t\t\t\t\t<div key={comment.id} className=\"item\">\n\t\t\t\t\t\t\t<div className=\"content\">\n\t\t\t\t\t\t\t    <div style={{paddingBottom: \"6px\"}} className=\"header\">{comment.user}</div>\n\t\t\t\t\t\t\t    {comment.content}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{this.renderDelete(comment.user, comment.id)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t}else{\n\t\t\t\t\treturn null\n\t\t\t\t}\n\t\t\t})\n\n\t\t);\n\t}\n\n\trenderDelete(user, commentId){\n\t\n\n\t\tif(this.props.user === user){\n\t\t\treturn(\n\t\t\t\t<div onClick={(e) => this.deleteComment(commentId)} style={{float: \"right\", cursor: \"pointer\"}}>delete</div>\n\t\t\t);\n\t\t\t\n\t\t}else{\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tasync deleteComment(commentId){\n\t\t\n\t\tawait streams.delete('/comments/' + commentId)\n\t\tthis.getComments()\n\t}\n\n\tonSubmit = async (e) => { \n\t\te.preventDefault()\n\t\tconst data = {\n\t\t\tuser: this.props.user,\n\t\t\tcontent: this.state.text,\n\t\t\tstreamId: this.props.stream.id\n\t\t}\n\n\t\tawait streams.post('/comments', data)\n\t\tthis.getComments()\n\t\tthis.setState({text: \"\"})\n\n\t}\n\n\tasync getComments(){\n\t\tconst comments = await streams.get('/comments/') \n\t\tthis.setState({comments: comments.data})\n\t}\n\n\n\trender(){ \n\t\t\t\n\t\t\treturn(\n\t\t\t\t<div>\n\t\t\t\t\t<ScrollArea style={{width: \"100%\", height: \"350px\" }} >\n\t\t\t\t\t\t<div className=\"ui segment\">\n\t\t\t\t\t\t\t<div style={{color: \"black\"}} className=\"ui relaxed divided list\">\n\t\t\t\t\t\t\t\t<h4 >Chat</h4>\n\t\t\t\t\t\t\t\t{this.renderComments()} \n\t\t\t\t    \t\t</div>\n\t\t\t\t    \t\t<div className=\"ui divider\"></div>\n\t\t\t\t    \t\t<div className=\"ui search\">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</ScrollArea>\n\t\t\t\t\t<form className=\"ui form\" onSubmit={this.onSubmit} style={{borderRadius: \"25px\"}}>\n\t\t\t\t    \t<input value={this.state.text} onChange={(e) => {this.setState({text: e.target.value})}} style={{width: \"100%\"}} className=\"prompt\" type=\"text\" placeholder=\"Add Comment...\"/>\n\t\t\t\t    </form>\n\t\t\t    </div>\n\t\t\t);\n\n\t\t\n\n\n\t}\n\n\t\n}\n\nconst mapStateToProps = (state) => {\n\treturn ({user: state.signedIn.userId}); \n}\n\n\nexport default connect(mapStateToProps)(Comments);\n\n"]},"metadata":{},"sourceType":"module"}